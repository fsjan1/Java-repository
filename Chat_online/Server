package question;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.*;

import javax.swing.JButton;


public class Server {
	
	public static void main(String[] args) throws Exception {
		
		// 1－新建接受数据报socket对象，绑定6666端口
		DatagramSocket socket = new DatagramSocket(6666);
		actionPerformedJudge action=new actionPerformedJudge();
		Windowbuilder win=new Windowbuilder();
		win.frame.setTitle("Server");
		win.frame.setVisible(true);
		
		// 2－新建用来接受数据的数据报包对象
		while (action.actionPerformedJudge) { 
			
			byte[] buf = new byte[1024];
			String message="Linking";
			DatagramPacket recPacket = new DatagramPacket(buf, buf.length);
//3－接受客户端数据报
			socket.receive(recPacket);
			
			System.out.println("client:" + message); // 打印控制台
			
			win.lblNewLabel.setText("client:"+message);//显示界面
//4－获得数据报中的客户地址和端口
			InetAddress clientAddress = recPacket.getAddress();
			int clientPort = recPacket.getPort();

			buf = message.getBytes();
//5－设置发送数据报的内容、地址和端口
			DatagramPacket sendPacket = new DatagramPacket(buf, buf.length, clientAddress, clientPort);
//6－发送数据报(直接将接受的内容返回)
			socket.send(sendPacket);
		}
	}

}
