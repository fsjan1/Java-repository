package question;

import java.net.*;
import java.util.Scanner;

import question.Windowbuilder.actionPerformedJudge;

public class Client {
	
	public static void main(String[] args) throws Exception {
		// 1－新建发送数据报socket对象
		
		Windowbuilder win=new Windowbuilder();
		actionPerformedJudge action=new actionPerformedJudge();
		win.frame.setTitle("Client");
		win.frame.setVisible(true);
		
		DatagramSocket socket = new DatagramSocket();
//2－将发送消息转换为字节数组
		while (action.actionPerformedJudge) {
			
			String message="Linking";
			byte[] messgeBytes = message.getBytes();
			InetAddress serverAddress = InetAddress.getByName("localhost");
//3－新建发送数据报包，设置内容、地址和端口
			DatagramPacket sendPacket = new DatagramPacket(messgeBytes, messgeBytes.length, serverAddress, 6666);
			socket.send(sendPacket); // 发送数据报
//4－定义接受缓冲字节数组
			byte[] buf = new byte[1024];

//5－新建接受数据包
			DatagramPacket recPacket = new DatagramPacket(buf, buf.length);

//6－接受数据报
			socket.receive(recPacket);
//控制台输出
			System.out.println("server:" + new String(buf));
			
			win.lblNewLabel.setText("server:"+message);//显示界面
		}
	}
}
