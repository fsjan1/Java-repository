package question;

import java.io.*;
import java.net.InetAddress;
import java.net.Socket;
import java.util.Scanner;

public class Client {
	public static void main(String[] args) throws Exception {
		// 1 新建与服务器的连接

		Socket socket = new Socket("192.168.2.100", 9001);

		while (true) {
			Scanner sc=new Scanner(System.in);
			String input=sc.nextLine();
			// 2 获得网络输出流
			OutputStream os = socket.getOutputStream();

			// 3 通过文件输入流将文件内容写入网络输出流
			byte[] buf1 = input.getBytes("utf-8");
			os.write(buf1);
			InputStream echoIs = socket.getInputStream();
			byte[] buf2 = new byte[1024];
			int length = echoIs.read(buf2);

			// 5-使用字节数组作为方法参数，构造字符串
			String echoMessage = new String(buf2, 0, length, "utf-8");
			System.out.println("server:" + echoMessage);
			// System.out.println(socket.getInetAddress());
			// System.out.println(InetAddress.getLocalHost());

		}
	}

}
